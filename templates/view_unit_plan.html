<!-- templates/view_unit_plan.html -->
{% extends "base.html" %}

{% block title %}Unit Plan: {{ plan.unit_topic }} - CUHK PE Planner{% endblock %}

{% block styles %}
<style>
    .print-btn {
        position: fixed;
        bottom: 20px;
        right: 20px;
        z-index: 100;
    }
    .success-message {
        background-color: #d4edda;
        border-left: 4px solid #28a745;
        padding: 1rem;
        margin-bottom: 2rem;
    }
    @media print {
        .no-print {
            display: none;
        }
        .page, .page-break { break-after: page; }
        body {
            font-size: 12pt;
            color: black;
        }
        .card {
            border: 1px solid black;
        }
    }
    .unit-section {
        margin-bottom: 2rem;
    }
    .chinese-section {
        font-family: "Microsoft JhengHei", "PMingLiU", sans-serif;
    }
    .unit-table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 1rem;
    }
    .unit-table th,
    .unit-table td {
        border: 1px solid #ddd;
        padding: 8px;
        text-align: left;
        vertical-align: top;
    }
    .unit-table th {
        background-color: #f8f9fa;
        font-weight: 600;
    }
    .section-title {
        padding-bottom: 0.5rem;
        margin: 2rem 0 1rem 0;
    }
</style>
{% endblock %}

{% block content %}
<!-- Success Message with Feedback Prompt -->
<div class="success-message no-print">
    <h5>Unit plan created successfully!</h5>
    <p>How was your experience?
       <a href="#" data-bs-toggle="modal" data-bs-target="#feedbackModal" class="text-decoration-none">Tell us what you think</a> 
       to help us improve our platform!
    </p>
</div>

<!-- ENGLISH UNIT PLAN -->
<div class="unit-section">
    <p style="margin-top:0pt; margin-bottom:0pt; text-align:center; line-height:18pt;">
        <strong><u>Unit Plan</u></strong>
    </p>
    
    <!-- Basic Information -->
    <p><strong>Unit ID:</strong> {{ plan.id }}</p>
    <p><strong>Unit/Topic:</strong> {{ plan.unit_topic }}</p>
    <p><strong>Number of Lessons:</strong> {{ plan.number_of_lessons }}</p>
    <p><strong>Period:</strong> {{ plan.period }}</p>
    <p><strong>Class:</strong> {{ plan.class_info }} 
       <strong>Level:</strong> {{ plan.class_level }} 
       <strong>Class Size:</strong> {{ plan.class_size }} 
       {% if plan.boys or plan.girls %}
       (Boys: {{ plan.boys }} Girls: {{ plan.girls }})
       {% endif %}
    </p>
    <p><strong>Teaching Venue/Facilities:</strong> {{ plan.venue }}</p>
    <p><strong>Equipment:</strong> {{ plan.equipment }}</p>

    <!-- Unit Overview -->
    <h4 class="section-title">1.) Unit Overview</h4>
    <p><strong>Overview:</strong> {{ plan.unit_overview }}</p>

    <!-- Unit Details Table -->
    <table class="unit-table">
        <tbody>
            <tr>
                <td style="width: 30%;"><strong>Skills/Topics to be taught:</strong></td>
                <td style="width: 70%;">{{ plan.skills_topics }}</td>
            </tr>
            <tr>
                <td><strong>Movement Concepts:</strong></td>
                <td>{{ plan.movement_concepts }}</td>
            </tr>
            <tr>
                <td><strong>Student's Previous Knowledge:</strong></td>
                <td>{{ plan.previous_knowledge }}</td>
            </tr>
            <tr>
                <td><strong>Expected Learning Outcomes:</strong></td>
                <td>{{ plan.learning_outcomes }}</td>
            </tr>
            <tr>
                <td><strong>Assessments:</strong></td>
                <td>{{ plan.assessments }}</td>
            </tr>
        </tbody>
    </table>

    <!-- Objectives -->
    <h4 class="section-title">2.) Objectives for this Unit: <i style="font-style: normal; font-size: 18pt;">Students will be able to -</i></h4>
    <table class="unit-table">
        <tbody>
            <tr>
                <p><strong>i) Psychomotor performance objectives</strong></p>
                <p>{{ plan.psychomotor_obj }}</p>
            </tr>
            <tr>
                <p><strong>ii) Cognitive performance objectives</strong></p>
                <p>{{ plan.cognitive_obj }}</p>
            </tr>
            <tr>
                <p><strong>iii) Affective objectives</strong></p>
                <p>{{ plan.affective_obj }}</p>
            </tr>
        </tbody>
    </table>

    <!-- Student Characteristics -->
    <h4 class="section-title">3.) Student Characteristics</h4>
    <table class="unit-table">
        <thead>
            <tr>
                <th style="width: 20%;">Domain</th>
                <th style="width: 40%;">Characteristics</th>
                <th style="width: 40%;">Matters to be Noted</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><strong>Psychomotor</strong></td>
                <td>{{ plan.psychomotor_chars }}</td>
                <td>{{ plan.psychomotor_notes }}</td>
            </tr>
            <tr>
                <td><strong>Cognitive</strong></td>
                <td>{{ plan.cognitive_chars }}</td>
                <td>{{ plan.cognitive_notes }}</td>
            </tr>
            <tr>
                <td><strong>Affective</strong></td>
                <td>{{ plan.affective_chars }}</td>
                <td>{{ plan.affective_notes }}</td>
            </tr>
        </tbody>
    </table>

    <!-- Approaches -->
    <h4 class="section-title">4.) Approaches/Ways to Handle</h4>
    <table class="unit-table">
        <tbody>
            <tr>
                <p><strong>i) Individual Differences between Students:</strong></p>
                <p>{{ plan.individual_differences }}</p>
            </tr>
            <tr>
                <p><strong>ii) Enhancing Students' Motivation in Learning:</strong></p>
                <p>{{ plan.enhancing_motivation }}</p>
            </tr>
        </tbody>
    </table>

    <!-- Safety -->
    <h4 class="section-title">Safety Precautions</h4>
    <p>{{ plan.safety_precautions }}</p>

    <!-- Unit Contents -->
    <h4 class="section-title">5.) Unit Contents</h4>
    <table class="unit-table">
        <thead>
            <tr>
                <th style="width: 10%;">Day</th>
                <th style="width: 15%;">Date</th>
                <th style="width: 35%;">Theme & Content</th>
                <th style="width: 40%;">Learning Activities</th>
            </tr>
        </thead>
        <tbody>
            {% for day in plan.unit_contents %}
            <tr>
                <td><strong>{{ day.day }}</strong></td>
                <td>{{ day.date }}</td>
                <td>{{ day.theme }}</td>
                <td>{{ day.activities }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <!-- Other Considerations -->
    <h4 class="section-title">6.) Other Considerations</h4>
    <p>{{ plan.other_considerations }}</p>
</div>

<div class="page-break"></div>

<!-- CHINESE UNIT PLAN -->
<div class="unit-section chinese-section">
    <p style="text-align: center; line-height: 18pt;">
        <strong><u>å–®å…ƒè¨ˆåŠƒ</u></strong>
    </p>
    
    <!-- Chinese Basic Information -->
    <p><strong>å–®å…ƒç·¨è™Ÿ:</strong> {{ plan.id }}</p>
    <p><strong>å–®å…ƒ/ä¸»é¡Œ:</strong> {{ plan.unit_topic_zh }}</p>
    <p><strong>èª²ç¯€ç¸½æ•¸:</strong> {{ plan.number_of_lessons_zh }}</p>
    <p><strong>æœŸé–“:</strong> {{ plan.period_zh }}</p>
    <p><strong>ç­ç´š:</strong> {{ plan.class_info_zh }} 
       <strong>ç´šåˆ¥:</strong> {{ plan.class_level_zh }} 
       <strong>å­¸ç”Ÿäººæ•¸:</strong> {{ plan.class_size_zh }} 
       {% if plan.boys_zh or plan.girls_zh %}
       (ç”·ç”Ÿ: {{ plan.boys_zh }} å¥³ç”Ÿ: {{ plan.girls_zh }})
       {% endif %}
    </p>
    <p><strong>æ•™å­¸å ´åœ°/è¨­æ–½:</strong> {{ plan.venue_zh }}</p>
    <p><strong>å™¨æ/ç”¨å…·:</strong> {{ plan.equipment_zh }}</p>

    <!-- Chinese Unit Overview -->
    <h4 class="section-title">1.) å–®å…ƒæ¦‚è¿°</h4>
    <p><strong>æ¦‚è¿°:</strong> {{ plan.unit_overview_zh }}</p>

    <!-- Chinese Unit Details Table -->
    <table class="unit-table">
        <tbody>
            <tr>
                <td style="width: 30%;"><strong>å–®å…ƒæ•™å­¸é‡é»:</strong></td>
                <td style="width: 70%;">{{ plan.skills_topics_zh }}</td>
            </tr>
            <tr>
                <td><strong>å–®å…ƒæ‰€éœ€çš„å‹•ä½œæ¦‚å¿µ:</strong></td>
                <td>{{ plan.movement_concepts_zh }}</td>
            </tr>
            <tr>
                <td><strong>å­¸ç”Ÿå·²æœ‰çŸ¥è­˜:</strong></td>
                <td>{{ plan.previous_knowledge_zh }}</td>
            </tr>
            <tr>
                <td><strong>é æœŸçš„å­¸ç”Ÿå­¸ç¿’æˆæœ:</strong></td>
                <td>{{ plan.learning_outcomes_zh }}</td>
            </tr>
            <tr>
                <td><strong>è©•æ ¸ï¼ˆå¦‚æœ‰ï¼‰:</strong></td>
                <td>{{ plan.assessments_zh }}</td>
            </tr>
        </tbody>
    </table>

    <!-- Chinese Objectives -->
    <h4 class="section-title">2.) æœ¬å–®å…ƒç›®æ¨™ï¼š<i style="font-style: normal; font-size: 18pt;"></i>å­¸ç”Ÿå°‡èƒ½</i></h4>
    <table class="unit-table">
        <tbody>
            <tr>
                <p><strong>I) æŠ€èƒ½æ–¹é¢</strong></p>
                <p>{{ plan.psychomotor_obj_zh }}</p>
            </tr>
            <tr>
                <p><strong>II) èªçŸ¥æ–¹é¢</strong></p>
                <p>{{ plan.cognitive_obj_zh }}</p>
            </tr>
            <tr>
                <p><strong>III) æƒ…æ„æ–¹é¢</strong></p>
                <p>{{ plan.affective_obj_zh }}</p>
            </tr>
        </tbody>
    </table>

    <!-- Chinese Student Characteristics -->
    <h4 class="section-title">3.) å­¸ç”Ÿç‰¹å¾µ</h4>
    <table class="unit-table">
        <thead>
            <tr>
                <th style="width: 20%;">ç¯„ç–‡</th>
                <th style="width: 40%;">ç‰¹å¾µ</th>
                <th style="width: 40%;">æ³¨æ„äº‹é …</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><strong>æŠ€èƒ½</strong></td>
                <td>{{ plan.psychomotor_chars_zh }}</td>
                <td>{{ plan.psychomotor_notes_zh }}</td>
            </tr>
            <tr>
                <td><strong>èªçŸ¥</strong></td>
                <td>{{ plan.cognitive_chars_zh }}</td>
                <td>{{ plan.cognitive_notes_zh }}</td>
            </tr>
            <tr>
                <td><strong>æƒ…æ„</strong></td>
                <td>{{ plan.affective_chars_zh }}</td>
                <td>{{ plan.affective_notes_zh }}</td>
            </tr>
        </tbody>
    </table>

    <!-- Chinese Approaches -->
    <h4 class="section-title">4.) è™•ç†æ–¹æ³•</h4>
    <table class="unit-table">
        <tbody>
            <tr>
                <p><strong>å­¸ç”Ÿå­¸ç¿’å€‹åˆ¥å·®ç•°:</strong></p>
                <p>{{ plan.individual_differences_zh }}</p>
            </tr>
            <tr>
                <p><strong>æå‡å­¸ç”Ÿå­¸ç¿’å‹•æ©Ÿ:</strong></p>
                <p>{{ plan.enhancing_motivation_zh }}</p>
            </tr>
        </tbody>
    </table>

    <!-- Chinese Safety -->
    <h4 class="section-title">å®‰å…¨æ³¨æ„äº‹é …</h4>
    <p>{{ plan.safety_precautions_zh }}</p>

    <!-- Chinese Unit Contents -->
    <h4 class="section-title">5.) å–®å…ƒå…§å®¹</h4>
    <table class="unit-table">
        <thead>
            <tr>
                <th style="width: 10%;">èª²ç¯€</th>
                <th style="width: 15%;">æ—¥æœŸ</th>
                <th style="width: 35%;">ä¸»é¡Œèˆ‡å…§å®¹</th>
                <th style="width: 40%;">æ´»å‹•å…§å®¹</th>
            </tr>
        </thead>
        <tbody>
            {% for day in plan.unit_contents_zh %}
            <tr>
                <td><strong>{{ day.day }}</strong></td>
                <td>{{ day.date }}</td>
                <td>{{ day.theme }}</td>
                <td>{{ day.activities }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <!-- Chinese Other Considerations -->
    <h4 class="section-title">6.) å…¶ä»–æ³¨æ„äº‹é …</h4>
    <p>{{ plan.other_considerations_zh }}</p>
</div>

<!-- Action Buttons -->
<div class="text-center mt-4 no-print">
    <a href="{{ url_for('create_unit_form') }}" class="btn btn-primary me-2">Create Another Unit Plan</a>
    <a href="{{ url_for('create_lesson_form') }}" class="btn btn-outline-primary me-2">Create Lesson Plan</a>
    <button onclick="window.print()" class="btn btn-outline-primary me-2">Print Plan</button>
    <button class="btn btn-outline-info" data-bs-toggle="modal" data-bs-target="#feedbackModal">
        Feedback
    </button>
</div>

<button onclick="window.print()" class="btn btn-primary print-btn no-print">
    ğŸ“„ Print
</button>
{% endblock %}